#!/bin/sh

JENKINS="/app/jenkins/bin/jenkins"
PROG=$(basename $JENKINS)

PID="/app/jenkins/logs/jenkins.pid"
LOCKFILE="/app/jenkins/logs/jenkins"

# Source function library.
. /etc/rc.d/init.d/functions
#. /lib/lsb/init-functions

start() {
        [ -x $JENKINS ] || exit 5
        echo -n "Starting $PROG: "
        daemon /app/jenkins/bin/jenkins
        retval=$?
        echo
        [ $retval -eq 0 ] && touch $LOCKFILE
        return $retval
}

stop() {
        echo -n "Stopping $PROG: "
        killproc $PROG -QUIT
        retval=$?
        echo
        [ $retval -eq 0 ] && rm -f $LOCKFILE
        return $retval
}

rh_status() {
        status $PROG
}

rh_status_q() {
        rh_status > /dev/null 2>&1
}

case "$1" in
        start)
                rh_status_q && exit 0
                $1
                ;;
        stop)
                rh_status_q || exit 0
                $1
                ;;

esac